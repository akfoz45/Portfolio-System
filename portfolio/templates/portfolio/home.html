{% extends 'portfolio/base.html' %}

{% block content %}

<header id="header" style="position: relative;">
  
  {% if user.is_authenticated and profile %}
    <a href="{% url 'edit_profile' %}" class="btn-admin-base btn-admin-edit"
       style="position: absolute; top: 20px; right: 20px; z-index: 999;">
       âœï¸ Bilgileri DÃ¼zenle
    </a>
  {% endif %}

  {% if profile.avatar %}
      <img src="{{ profile.avatar.url }}" alt="Avatar" style="width: 150px; height: 150px; object-fit: cover; border-radius: 50%; margin-bottom: 1rem; border: 4px solid rgba(255,255,255,0.3);">
  {% else %}
      <img src="https://static.thenounproject.com/png/4507018-200.png" alt="VarsayÄ±lan Avatar" style="width: 150px; height: 150px; border-radius: 50%; margin-bottom: 1rem; background: white; padding: 10px;">
  {% endif %}

  <h1>{{ profile.full_name|default:"AdÄ±nÄ±z SoyadÄ±nÄ±z" }}</h1>
  <p>{{ profile.subtitle|default:"Web GeliÅŸtirici" }}</p>

  {% if user.is_authenticated and not profile %}
    <div style="margin-top: 20px;">
        <p class="profile-alert-bg" style="display:inline-block;">âš ï¸ Profil bilgisi yok</p><br>
        <a href="{% url 'edit_profile' %}" class="btn-admin-base btn-admin-add" style="margin-top: 10px;">
            â• Profil OluÅŸtur
        </a>
    </div>
  {% endif %}
</header>

<section id="about">
  <h2>{{ profile.about_title|default:"HakkÄ±mda" }}</h2>
  <p>
    {{ profile.about_text|default:"HenÃ¼z bir tanÄ±tÄ±m yazÄ±sÄ± girmediniz. YukarÄ±daki 'DÃ¼zenle' butonunu kullanarak ekleyebilirsiniz." }}
  </p>
</section>


<section id="portfolio">
  <h2 style="text-align:center; color:#1e40af; margin-bottom: 3rem;">Projelerim</h2>
  
  {% if user.is_authenticated %}
    <div style="text-align: center; margin-bottom: 2rem;">
        <a href="{% url 'add_project' %}" class="btn-admin-base btn-admin-add">
            <i class="fas fa-plus"></i> Yeni Proje Ekle
        </a>
    </div>
  {% endif %}

  <div class="portfolio-grid">
    {% for project in projects %}
    <div class="item" style="position: relative;">
      
      {% if user.is_authenticated %}
          <a href="{% url 'edit_project' project.id %}" 
             class="btn-admin-base"
             style="position: absolute; top: 10px; right: 45px; background: rgba(255,255,255,0.9); color: #333; padding: 5px 10px; border-radius: 5px; font-size: 0.8rem; z-index: 10;">
             âœï¸
          </a>
          <a href="{% url 'delete_project' project.id %}" 
             class="btn-admin-delete"
             style="position: absolute; top: 10px; right: 10px; padding: 5px 10px; border-radius: 5px; font-size: 0.8rem; z-index: 10;">
             ğŸ—‘ï¸
          </a>
      {% endif %}

      {% if project.image %}
         <img src="{{ project.image.url }}" alt="{{ project.title }}">
      {% else %}
         <img src="https://picsum.photos/600/400" alt="Placeholder">
      {% endif %}
      
      <div class="content">
        <h3>{{ project.title }}</h3>
        <p>{{ project.description|truncatechars:100 }}</p>
        
        <a href="{% url 'detail' project.id %}" style="color:#2563eb; text-decoration:none; font-weight:600; font-size:0.9rem;">Ä°ncele &rarr;</a>
      </div>
    </div>
    {% empty %}
      <p style="text-align:center; width:100%; color: #475569;">HenÃ¼z proje eklenmemiÅŸ. LÃ¼tfen yukarÄ±daki butonla bir proje ekleyin.</p>
    {% endfor %}
  </div>

</section>

<section id="contact">
  <h2>Ä°letiÅŸim</h2>
  
  {% if success %}
    <div class="success-msg">
        MesajÄ±nÄ±z baÅŸarÄ±yla gÃ¶nderildi! En kÄ±sa sÃ¼rede dÃ¶nÃ¼ÅŸ yapacaÄŸÄ±m.
    </div>
  {% endif %}

  <form method="post">
    {% csrf_token %}
    
    <label>AdÄ±nÄ±z</label><br>
    <input type="text" name="name" required><br>

    <label>Email</label><br>
    <input type="email" name="email" required><br>

    <label>MesajÄ±nÄ±z</label><br>
    <textarea name="message" rows="5" required></textarea><br>

    <button type="submit">GÃ¶nder</button>
  </form>
</section>

{% endblock %}